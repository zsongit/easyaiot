# ============================================
# 模型部署服务环境变量配置模板
# ============================================
# 使用方法：
# 1. 复制此文件为 .env: cp env.example .env
# 2. 根据实际情况修改各个配置项
# 3. 注意：.env 文件包含敏感信息，不要提交到版本控制系统
# ============================================

# ============================================
# 模型部署服务核心配置（必需）
# ============================================
# 服务ID（可选，由AI模块分配）
SERVICE_ID=

# 服务名称（必需）
SERVICE_NAME=deploy_service

# 模型ID（可选，用于Nacos服务注册）
MODEL_ID=

# 模型版本（可选，用于Nacos服务注册，默认V1.0.0）
MODEL_VERSION=V1.0.0

# 模型格式（可选，用于Nacos服务注册，默认pytorch）
# 可选值: pytorch, onnx
MODEL_FORMAT=pytorch

# 服务端口（必需，默认8000）
PORT=8000

# 模型文件路径（必需）
MODEL_PATH=

# ============================================
# AI模块服务发现配置
# ============================================
# AI模块服务名称（用于从Nacos获取AI模块实例，默认model-server）
AI_SERVICE_NAME=model-server

# AI模块API地址（可选，如果Nacos获取失败时使用，默认http://localhost:5000）
AI_SERVICE_API=http://localhost:5000

# ============================================
# Flask应用配置
# ============================================
# Flask密钥（用于会话加密，请使用强随机字符串）
SECRET_KEY=your-secret-key-please-change-this-to-a-random-string

# Flask运行端口（默认5000）
FLASK_RUN_PORT=5000

# Flask运行主机（默认0.0.0.0）
FLASK_RUN_HOST=0.0.0.0

# Flask服务器名称（用于URL生成，如果不设置会自动从FLASK_RUN_HOST和FLASK_RUN_PORT推断）
# 格式: IP或域名:端口，例如: 192.168.1.100:5000 或 api.example.com:5000
# 注意：如果FLASK_RUN_HOST是0.0.0.0，会自动使用POD_IP或自动获取的IP
FLASK_SERVER_NAME=

# Flask应用根路径（默认/）
FLASK_APPLICATION_ROOT=/

# Flask URL方案（http或https，默认http）
FLASK_PREFERRED_URL_SCHEME=http

# ============================================
# 数据库配置
# ============================================
# PostgreSQL数据库连接URL
# 格式: postgresql://用户名:密码@主机:端口/数据库名
# 注意：如果使用postgres://开头，代码会自动转换为postgresql://
# 在Docker环境中，使用中间件服务名称：PostgresSQL
# 数据库名：iot-ai20（由中间件安装脚本创建）
DATABASE_URL=postgresql://postgres:iot45722414822@PostgresSQL:5432/iot-ai20

# ============================================
# Nacos服务注册与发现配置
# ============================================
# Nacos服务器地址（格式：IP:端口 或 服务名称:端口）
# 在Docker环境中，使用中间件服务名称：Nacos
NACOS_SERVER=Nacos:8848

# Nacos命名空间（默认：空字符串，使用默认命名空间public）
NACOS_NAMESPACE=

# Nacos用户名（默认：nacos）
NACOS_USERNAME=nacos

# Nacos密码
NACOS_PASSWORD=basiclab@iot78475418754

# 服务名称（用于Nacos注册）
SERVICE_NAME=model-server

# Pod IP地址（可选，如果不设置会自动获取）
# 在Docker容器中运行时，建议设置为容器的IP地址
POD_IP=

# ============================================
# MinIO对象存储配置
# ============================================
# MinIO服务器地址（格式：IP:端口 或 服务名称:端口）
# 在Docker环境中，使用中间件服务名称：MinIO
MINIO_ENDPOINT=MinIO:9000

# MinIO访问密钥
MINIO_ACCESS_KEY=minioadmin

# MinIO密钥（由中间件安装脚本设置）
MINIO_SECRET_KEY=basiclab@iot975248395

# MinIO是否使用HTTPS（true/false）
MINIO_SECURE=false

# ============================================
# GPU配置
# ============================================
# CUDA可见设备（0表示使用第一个GPU，all表示使用所有GPU）
# 在docker-compose.yaml中已配置，这里可以覆盖
CUDA_VISIBLE_DEVICES=0

# ============================================
# 讯飞语音识别配置（可选）
# ============================================
# 讯飞APP ID（如果不需要语音识别功能，可以留空）
XUNFEI_APP_ID=

# 讯飞密钥（如果不需要语音识别功能，可以留空）
XUNFEI_SECRET_KEY=

# ============================================
# 其他配置
# ============================================
# Python输出不缓冲（建议设置为1）
PYTHONUNBUFFERED=1

# 时区设置
TZ=Asia/Shanghai

# ============================================
# 推流服务器配置（可选）
# ============================================
# 推流服务器地址（用于推理结果推流）
MODEL_AI_PUSH_URL=pro.basiclab.top:1935

# ============================================
# Redis配置（可选，如果需要）
# ============================================
# Redis服务器地址（在Docker环境中，使用中间件服务名称：Redis）
# REDIS_HOST=Redis
# REDIS_PORT=6379
# REDIS_PASSWORD=basiclab@iot975248395

# ============================================
# Kafka配置（可选，如果需要）
# ============================================
# Kafka服务器地址（在Docker环境中，使用中间件服务名称：Kafka）
# KAFKA_BOOTSTRAP_SERVERS=Kafka:9092

# ============================================
# TDengine配置（可选，如果需要）
# ============================================
# TDengine服务器地址（在Docker环境中，使用中间件服务名称：TDengine）
# TDENGINE_HOST=TDengine
# TDENGINE_PORT=6030

# ============================================
# 代理配置（可选，如果需要）
# ============================================
# HTTP_PROXY=
# HTTPS_PROXY=
# NO_PROXY=localhost,127.0.0.1

